<div
  id="booking-step"
  data-step="contact"
  data-progress='{{ data | tojson }}'
  class="rounded-xl border border-slate-200 bg-white p-6 shadow-sm"
>
  <form
    data-step-form
    hx-post="{{ url_for('booking_step', step='contact') }}"
    hx-target="#booking-step"
    hx-swap="outerHTML"
    class="grid gap-4 md:grid-cols-2"
  >
    <div class="md:col-span-2">
      <h2 class="text-lg font-semibold text-slate-800">連絡先の入力</h2>
      <p class="text-sm text-slate-500">ご本人確認のため、必須項目をご記入ください。入力内容は自動的に保存されます。</p>
    </div>

    <label class="block space-y-2">
      <span class="text-sm font-medium text-slate-700">お名前<span class="text-red-600">*</span></span>
      <div class="space-y-1">
        <input
          name="name"
          value="{{ data.name }}"
          maxlength="120"
          required
          class="w-full rounded border p-2 focus:border-slate-500 focus:outline-none {{ 'border-red-500' if errors.get('name') }}"
          hx-post="{{ url_for('booking_step', step='contact') }}"
          hx-target="#booking-step"
          hx-swap="outerHTML"
          hx-include="closest form"
          hx-vals='{"_validate": "1"}'
          hx-trigger="change delay:400ms, blur"
        />
        {% if errors.get('name') %}
        <p class="text-xs text-red-600">{{ errors['name'] }}</p>
        {% endif %}
      </div>
    </label>

    <label class="block space-y-2">
      <span class="text-sm font-medium text-slate-700">電話番号<span class="text-red-600">*</span></span>
      <div class="space-y-1">
        <input
          name="phone"
          type="tel"
          inputmode="tel"
          value="{{ data.phone }}"
          pattern="[0-9+\-() ]{9,16}"
          maxlength="16"
          required
          class="w-full rounded border p-2 focus:border-slate-500 focus:outline-none {{ 'border-red-500' if errors.get('phone') }}"
          hx-post="{{ url_for('booking_step', step='contact') }}"
          hx-target="#booking-step"
          hx-swap="outerHTML"
          hx-include="closest form"
          hx-vals='{"_validate": "1"}'
          hx-trigger="change delay:400ms, blur"
        />
        <p class="text-xs text-slate-500">数字・+ - () とスペースのみ、9〜16桁で入力してください。</p>
        {% if errors.get('phone') %}
        <p class="text-xs text-red-600">{{ errors['phone'] }}</p>
        {% endif %}
      </div>
    </label>

    <label class="block space-y-2 md:col-span-2">
      <span class="text-sm font-medium text-slate-700">メールアドレス（任意）</span>
      <div class="space-y-1">
        <input
          name="email"
          type="email"
          value="{{ data.email }}"
          maxlength="200"
          class="w-full rounded border p-2 focus:border-slate-500 focus:outline-none {{ 'border-red-500' if errors.get('email') }}"
          placeholder="例）sample@example.com"
          hx-post="{{ url_for('booking_step', step='contact') }}"
          hx-target="#booking-step"
          hx-swap="outerHTML"
          hx-include="closest form"
          hx-vals='{"_validate": "1"}'
          hx-trigger="change delay:400ms, blur"
        />
        {% if errors.get('email') %}
        <p class="text-xs text-red-600">{{ errors['email'] }}</p>
        {% else %}
        <p class="text-xs text-slate-500">メールでの連絡を希望される場合にご記入ください。</p>
        {% endif %}
      </div>
    </label>

    <div class="md:col-span-2 flex items-center justify-end gap-3">
      <button type="submit" class="rounded-lg bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow hover:opacity-90">次へ進む</button>
    </div>
  </form>
</div>
